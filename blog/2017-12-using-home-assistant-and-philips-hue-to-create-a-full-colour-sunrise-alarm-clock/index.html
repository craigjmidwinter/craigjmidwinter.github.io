<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/assets/blog/sunrise.jpg"/><link rel="stylesheet" href="/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/craigjmidwinter.github.io/_next/static/chunks/webpack-05a4c90833827c02.js"/><script src="/craigjmidwinter.github.io/_next/static/chunks/4bd1b696-d31891ed15a5103e.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/517-2e9372f9ab95c04e.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/main-app-3b8a8eba0304deb0.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/ee560e2c-c5c28398d0153d35.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/322-53eb1d32bf710b44.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/173-52b2b489d82616e2.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/590-97f4dc9b90039a27.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/app/blog/%5Bslug%5D/page-9af1e0a685a480c8.js" async=""></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><title>Craig Midwinter - Personal Website</title><meta name="description" content="Welcome to my personal website. Check out my resume, GitHub, LinkedIn, podcast, and blog posts."/><link rel="icon" href="/craigjmidwinter.github.io/favicon.ico" type="image/x-icon" sizes="16x16"/><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"/><script src="/craigjmidwinter.github.io/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div id="root"><video autoPlay="" loop="" muted="" class="sc-cMqPwU jJIuNk"><source src="/outrun-waves_1.webm" type="video/webm"/></video><nav class="sc-FEMpB cMMXFN"><ul class="sc-gjcoXW kIaxle"><li class="sc-dVBluf iGNEod"><a href="/craigjmidwinter.github.io/blog/">BLOG HOME</a></li><li class="sc-dVBluf iGNEod"><a href="/craigjmidwinter.github.io">ABOUT CRAIG</a></li></ul></nav><div class="sc-jUkaYT hNzkKj"><div class="sc-jHswkR goaCnt"><p>2017-12-06</p><h1>Using Home Assistant and Philips Hue to create a full colour sunrise</h1><img src="/assets/blog/sunrise.jpg" alt="Using Home Assistant and Philips Hue to create a full colour sunrise" class="sc-cSaEAk gjOEAT"/></div><div class="sc-deSjom dYLfrY"><p><strong>Note:</strong> This blog is an archive. Some content may be out of date, and images may be broken or missing. If you find an issue or have a question, please email <strong>craig.j.midwinter@gmail.com</strong>.</p></div><p>This is a new automation in my set-up, but it’s one I’m pretty happy with, not only because I think it’s a pretty cool effect, but for me, it’s actually a real money-saver.</p>
<p>Here’s how I used <a href="http://amzn.to/2jkHCCj">Philips Hue</a> and <a href="https://home-assistant.io/">Home Assistant</a> to build a natural coloured sunrise in my bedroom and save over $400/year--</p>
<div class="sc-eiwqOE jiDSyH"><iframe src="https://www.youtube.com/embed/mccJNHih7a8" allowFullScreen="" title=""></iframe></div>
<p><strong>How does this save me money?</strong></p>
<p>I am addicted to snoozing on alarms in the morning.</p>
<p>In the mornings, I can either have a nice relaxing 30-minute walk into the office, or I can rush to the bus stop about 7
minutes away and catch an 10 minute bus. This choice getting left to be made by the sleepiest version of myself is no
good-- sleepy Craig sucks. He’s a lazy piece of shit. He’d sell his first-born child for an extra 13 minutes of sleep in
to morning.</p>
<p>Over time, taking the bus adds up. By a conservative estimate of the e-cash fare ($2.35, for now...), and saving 4 trips/week for 48 weeks, that’s $451.20 back in my pocket! Fuck yeah!</p>
<p>This automation has significantly cut down on how many times I hit snooze, and I also find that waking up is less jarring and I’m a lot less groggy as a result.</p>
<p>If you are a Home Assistant user, and you have Philips Hue bulbs or some other coloured smart lighting system setup that
supports transitions, I definitely recommend setting something like this up!</p>
<p><strong>How does it work?</strong></p>
<p>I’m going to assume that you’ve already got Home Assistant set up and working with your lights. If not, head over to homeassistant.io and give it a try. It’s really pretty easy to get up and running and the learning curve is not as steep as it looks, plus, there is a fantastic community that will provide you with support if you hit a snag.</p>
<p>Now, to implement this, we are going to be creating a Home Assistant script, which will be what run to create our sunrise effect, we’ll create a couple of entities to use in the front end so that we can easily configure when we want this to run, and then we’ll create the automation that will ultimate trigger the script at the desired time.</p>
<p><strong>The script</strong></p>
<p>If you’ve played around with Home Assistant a bit, you might have already got a few scripts set-up, or you might just have everything configured right in the actions of your automations. There are a couple of advantages to doing this sort of thing in a script-- the first is that scripts allow us to reuse the actions easily and then if we want to change the action, we only need to adjust it in one place. This is especially nice when we are building more involved multi-step actions like our sunrise.</p>
<p>Here’s what our sunrise script looks like-- It’s a long one, but I’ve got some comments there to give you an idea of what each block is doing and separated it into blocks for readability:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">sunrise</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">sequence</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#8e8e8e"># light 1 dark red to medium warm orange</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.craigs_bedroom_lamp
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">rgb_color</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#ccc">[</span><span class="token token" style="color:#e2777a">98</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">19</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">0</span><span class="token token" style="color:#ccc">]</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1.00</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.craigs_bedroom_lamp
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">rgb_color</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#ccc">[</span><span class="token token" style="color:#e2777a">249</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">123</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">0</span><span class="token token" style="color:#ccc">]</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">103</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">15</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">15.00</span><span>
</span>    
<span>        </span><span class="token token" style="color:#8e8e8e"># light 2 dark warm orange to medium warm orange</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.jessicas_bedroom_lamp
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">rgb_color</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#ccc">[</span><span class="token token" style="color:#e2777a">249</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">123</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">0</span><span class="token token" style="color:#ccc">]</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1.00</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.jessicas_bedroom_lamp
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">rgb_color</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#ccc">[</span><span class="token token" style="color:#e2777a">249</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">123</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">0</span><span class="token token" style="color:#ccc">]</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">103</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">15</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">15.00</span><span>
</span>    
<span>        </span><span class="token token" style="color:#8e8e8e"># group medium warm orange to full bright</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.sunrise
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">rgb_color</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#ccc">[</span><span class="token token" style="color:#e2777a">255</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">178</span><span class="token token" style="color:#ccc">,</span><span class="token token" style="color:#e2777a">67</span><span class="token token" style="color:#ccc">]</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">255</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">30</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">30.00</span><span>
</span>    
<!-- -->    
<span>        </span><span class="token token" style="color:#8e8e8e"># turn one bulb overhead on lowest and fade to full brightness slowly</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.bedroom_fan_1
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1.00</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.bedroom_fan_1
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">255</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">60</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">60.00</span><span>
</span>    
<span>        </span><span class="token token" style="color:#8e8e8e"># turn on the second bulb overhead and fade to full brightness a bit faster</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.bedroom_fan_2
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1.00</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.bedroom_fan_2
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">255</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">30</span><span>
</span>    
<span>        </span><span class="token token" style="color:#8e8e8e"># no delay - also through put the corridor outside the room on</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> homeassistant.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> light.upstairs_corridor
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">brightness</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">200</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">transition</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">5</span></code></div></div></pre>
<p>There are a couple of things worth noting about this script. What makes this effect work well is the use of the light entities ‘transition’ attribute in combination with the ‘delay’ action in the script.</p>
<p>Typically, Home Assistant wants to perform actions quickly and then immediately move on to the next action. Normally, that’s exactly what we want, but in this case, it’s not. By setting the ‘transition’ in the data when we call the ‘homeassistant.turn_on’ service, we are telling Home Assistant how long it should take to transition from the lights current state to the new state. Now, we need Home Assistant to wait before performing the next step so we use the ‘delay’ action and set it to the same number as the number we have as our transition time.</p>
<p>I’ve played with the times and I found that for me, these are the durations that work best, but you can play with them to suit your preference.</p>
<p><strong>The entities</strong></p>
<p>Now, before we write our automation to trigger this, lets create some entities that we can use to configure this a bit easier.</p>
<p>I’ve got this set as two separate automations in my set-up. One for weekdays, and the other for weekends. This lets me have separate wake-up times that I don’t need to mess with too often.</p>
<p>Here’s the entities I’ve created:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">input_boolean</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_sunrise</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_sunrise</span><span class="token token" style="color:#ccc">:</span><span>
</span>    
<span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">input_number</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_alarm_hour</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Hour
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">23</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_alarm_minutes</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Minutes
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">59</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">5</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_alarm_hour</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Hour
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">23</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_alarm_minutes</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Minutes
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">59</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">5</span><span>
</span>    
<span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">sensor</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">platform</span><span class="token token" style="color:#ccc">:</span><span> template
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">sensors</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_alarm_time</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">friendly_name</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;Time&#x27;</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">value_template</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;{{ &quot;%02d:%02d&quot; | format(states(&quot;input_number.weekday_alarm_hour&quot;) | int, states(&quot;input_number.weekday_alarm_minutes&quot;) | int) }}&#x27;</span><span>
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_alarm_time</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">friendly_name</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;Time&#x27;</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">value_template</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;{{ &quot;%02d:%02d&quot; | format(states(&quot;input_number.weekend_alarm_hour&quot;) | int, states(&quot;input_number.weekend_alarm_minutes&quot;) | int) }}&#x27;</span></code></div></div></pre>
<p><strong>Okay, whoa, whoa, whoa! What the fuck are those sensors? They look complicated.</strong></p>
<p>Yeah, you can add those and not touch them, but if you want to know what they are doing, I’ll try to explain. If you don’t give a shit or already know, <a href="#sunrise-entities">skip ahead</a></p>
<p>As you may or may not know, <a href="https://home-assistant.io/docs/configuration/templating/">Home Assistant has support for a template engine</a> called <a href="http://jinja.pocoo.org/">Jinja</a>. This allows you to evaluate and manipulate data at execution. These sensors that we are creating here basically takes the data and instructions that we are giving it and evaluate it as the sensors state. This is a really powerful tool to have in your Home Assistant arsenal, and I’d highly recommend looking at the Home Assistant documentation and the Jinja documentation to get a better grasp on this.</p>
<p>I’ll try to break down this statement and what happens behind the scenes:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(states(&quot;input_number.weekday_alarm_hour&quot;) </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#ccc">,</span><span> states(&quot;input_number.weekday_alarm_minutes&quot;) </span><span class="token token" style="color:#ccc">|</span><span> int) </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>We’ll start looking at this from the inside-out</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> </span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**format(states(&quot;input_number.weekday_alarm_hour&quot;)**</span><span> </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#ccc">,</span><span> states(&quot;input_number.weekday_alarm_minutes&quot;) </span><span class="token token" style="color:#ccc">|</span><span> int) </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>This item in bold is just getting the state of the entity that it’s being passed. In this case, it’s going to be a string of characters representing a number-- If you remember when we created this entity, from 0-23 representing the hour we want to wake up at. Let’s pretend that we’ve got this set to 6. So this is going to end up returning “6”, and our statement now essentially looks like this:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**“6”**</span><span> </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#ccc">,</span><span> states(&quot;input_number.weekday_alarm_minutes&quot;) </span><span class="token token" style="color:#ccc">|</span><span> int) </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>Now, we’ve got the same thing happening to the other number entity.</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(“6” </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**states(&quot;input_number.weekday_alarm_minutes&quot;)**</span><span> </span><span class="token token" style="color:#ccc">|</span><span> int) </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>This represented minutes, so it’s going to be between 0-59. Let’s pretend we’ve got this set to 30. As you can probably guess, this is going to return “30”</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(“6” </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**“30”**|</span><span> int) </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>Ok, now what is that line symbol (&#x27;|&#x27;) we see in here? That’s a pipe symbol and in jinja, it’s the filter operator. Essentially, it takes what is on the left and filters it through what is on the right side.</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**“6”</span><span> </span><span class="token token" style="color:#ccc">|</span><span> int</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**“30”|</span><span> int</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**)</span><span> </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>In the case above, we are taking “6” and putting it though the int filter. This int filter basically says to take the characters on the left side and make them a number that the computer can use. So “6” | int becomes 6 and “30” | 30. Now our statement looks like this:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;%02d</span><span class="token token" style="color:#ccc">:</span><span>%02d&quot; </span><span class="token token" style="color:#ccc">|</span><span> format(</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**6</span><span class="token token" style="color:#ccc">,</span><span> 30</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**)</span><span> </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>Ok, that’s a bit easier to read now. Now we’ve just got some crazy characters, the filter with our numbers representing the time.</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> </span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**&quot;%02d:%02d&quot;</span><span> </span><span class="token token" style="color:#ccc">|</span><span> format(6</span><span class="token token" style="color:#ccc">,</span><span> 30)</span><span class="token token" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575;font-weight:bold">**</span><span> </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>So, the format filter means to apply Python string formatting. Python string formatting is a way for you to say “I want a string of characters that looks like this” and then give it some data and get a string that looks the way you asked it to.</p>
<p>The crazy string of characters represents how we want the resulting string to look and the numbers in the brackets are extra data (called parameters) that we want to be formatted in this way.</p>
<p><a href="https://pyformat.info/">PyFormat.info</a> has some good information on all the ways you can format a string, but what you need to know about this is that the ‘%’ sign means that we are going to put the a value that is getting passed in here, the ‘d’ is the type of data that is going here (d means int). The stuff in between says how we want to display it-- the 2 means it should be 2 characters long and 0 is the character we should use to pad it if the value is too short. So for our first value 6 inserted at the first %02d becomes 06 and the second value at the second %02d becomes 30. The ‘:’ character unchanged since it is outside of the replacement which leaves us with</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ccc">{</span><span class="token token" style="color:#ccc">{</span><span> &quot;06</span><span class="token token" style="color:#ccc">:</span><span>30” </span><span class="token token" style="color:#ccc">}</span><span class="token token" style="color:#ccc">}</span></code></div></div></pre>
<p>The double curly brackets in jinja just means to evaluate what is inside and output it. We already know what that is-- 06:30! That’s our sensors state!</p>
<p><strong>The other entities</strong></p>
<p>Ok, remember those other entities we set up? The non-crazy ones?</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">input_boolean</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_sunrise</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_sunrise</span><span class="token token" style="color:#ccc">:</span><span>
</span>    
<span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">input_number</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_alarm_hour</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Hour
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">23</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_alarm_minutes</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Minutes
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">59</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">5</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_alarm_hour</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Hour
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">23</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">1</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_alarm_minutes</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Minutes
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">icon</span><span class="token token" style="color:#ccc">:</span><span> mdi</span><span class="token token" style="color:#ccc">:</span><span>timer
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">min</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">max</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">59</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">step</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">5</span></code></div></div></pre>
<p>Yeah, those ones.</p>
<p>I just added those their own groups like this and then added them to one of my views:</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday_sunrise_panel</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Weekday Alarm Clock
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entities</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_boolean.weekday_sunrise
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> sensor.weekday_alarm_time
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_number.weekday_alarm_hour
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_number.weekday_alarm_minutes
</span>    
<span>    </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekend_sunrise_panel</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">name</span><span class="token token" style="color:#ccc">:</span><span> Weekend Alarm Clock
</span><span>        </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entities</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_boolean.weekend_sunrise
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> sensor.weekend_alarm_time
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_number.weekend_alarm_hour
</span><span>          </span><span class="token token" style="color:#ccc">-</span><span> input_number.weekend_alarm_minutes</span></code></div></div></pre>
<p><strong>The automation</strong></p>
<p>Ok, so now that we’ve got our script ready to go and our entities set up in the front end, let’s make our automations!</p>
<pre><div class="sc-jZTQcj hRjXcY"><button class="sc-dkBYrC bHcmTX"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Copy</button><div style="color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background-color:transparent !important;background-image:linear-gradient(to bottom, #2a2139 75%, #34294f)"><code class="language-yaml" style="white-space:pre;color:#f92aad;text-shadow:0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">alias</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;Weekday Sunrise&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">initial_state</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;on&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">trigger</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">platform</span><span class="token token" style="color:#ccc">:</span><span> time
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">minutes</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;/1&#x27;</span><span>
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> time
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> mon
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> tue
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> wed
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> thu
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> fri
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> state
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> input_boolean.weekday_sunrise
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">state</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;on&#x27;</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> template
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">value_template</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;{{ ((as_timestamp(now())|int)|timestamp_custom(&quot;%H:%M&quot;))  == states(&quot;sensor.weekday_alarm_time&quot;) }}&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">action</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> media_player.play_media
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">data</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> media_player.everywhere
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">media_content_id</span><span class="token token" style="color:#ccc">:</span><span> https</span><span class="token token" style="color:#ccc">:</span><span>//149walnut.publicvm.com</span><span class="token token" style="color:#ccc">:</span><span>8123/local/audio/circle</span><span class="token token" style="color:#ccc">-</span><span>of</span><span class="token token" style="color:#ccc">-</span><span>life.mp3
</span><span>            </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">media_content_type</span><span class="token token" style="color:#ccc">:</span><span> audio/mp3
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">delay</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">3</span><span> </span><span class="token token" style="color:#8e8e8e">#this is here to compensate for the delay in playing the media over chromecast.</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> script.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> script.sunrise
</span>    
<span>    </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">alias</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;Weekend Sunrise&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">initial_state</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;on&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">trigger</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">platform</span><span class="token token" style="color:#ccc">:</span><span> time
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">minutes</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;/1&#x27;</span><span>
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">seconds</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#e2777a">0</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> time
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">weekday</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> sat
</span><span>            </span><span class="token token" style="color:#ccc">-</span><span> sun
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> state
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> input_boolean.weekend_sunrise
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">state</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;on&#x27;</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">condition</span><span class="token token" style="color:#ccc">:</span><span> template
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">value_template</span><span class="token token" style="color:#ccc">:</span><span> </span><span class="token token" style="color:#f87c32">&#x27;{{ ((as_timestamp(now())|int)|timestamp_custom(&quot;%H:%M&quot;))  == states(&quot;sensor.weekend_alarm_time&quot;) }}&#x27;</span><span>
</span><span>      </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">action</span><span class="token token" style="color:#ccc">:</span><span>
</span><span>        </span><span class="token token" style="color:#ccc">-</span><span> </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">service</span><span class="token token" style="color:#ccc">:</span><span> script.turn_on
</span><span>          </span><span class="token token key" style="color:#f4eee4;text-shadow:0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575">entity_id</span><span class="token token" style="color:#ccc">:</span><span> script.sunrise</span></code></div></div></pre>
<p>Here’s our two automations. Both are pretty much exactly the same, with a couple of exceptions.</p>
<p>The triggers are exactly the same in both. The trigger happens every minute. Obviously we don’t want this firing every minute, that’s where our conditions come into play.</p>
<p>The first condition is for the day of the week-- pretty straight forward. The weekday automation is set to weekdays and the weekend automation is set to weekends.</p>
<p>The second condition is whether or not we have our input_boolean switch enabled. We’ve got a separate switch so we can turn weekday or weekend alarms on or off independently. Each automation uses the corresponding input_boolean for this condition.</p>
<p>The third condition is another template! We already know how templates get evaluated. This is pretty similar. What we haven’t seen before is the == sign. This means to check for equivalence between the values on either side.</p>
<p>Without going into too much detail about templates again, the stuff on the right side uses some built-in functions to get the current time and output it. These built-in functions output the time as a string in the same format as the format we used for the sensor we created earlier. On the right side-- hey, look at that! We’re getting the state of our sensor! So, when the clock hits the time that we set, this will be True and our third condition will be met!</p>
<p>The action on both of these are similar-- they both trigger our script. The only real difference between these two actions is that on weekdays, I like to wake up to the sunrise accompanied by “The Circle of Life” from the Lion King soundtrack blaring on all my speakers… I don’t need to justify myself to you.</p>
<p>That’s it! If you have any questions or if you’ve implemented this yourself, let me know in the comments!</p></div></div><script src="/craigjmidwinter.github.io/_next/static/chunks/webpack-05a4c90833827c02.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[15244,[],\"\"]\n3:I[43866,[],\"\"]\n5:I[86213,[],\"OutletBoundary\"]\n7:I[86213,[],\"MetadataBoundary\"]\n9:I[86213,[],\"ViewportBoundary\"]\nb:I[34835,[],\"\"]\n:HL[\"/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"w_tnSzuQa1qxRBTjk73d2\",\"p\":\"/craigjmidwinter.github.io\",\"c\":[\"\",\"blog\",\"2017-12-using-home-assistant-and-philips-hue-to-create-a-full-colour-sunrise-alarm-clock\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2017-12-using-home-assistant-and-philips-hue-to-create-a-full-colour-sunrise-alarm-clock\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Press+Start+2P\u0026display=swap\",\"rel\":\"stylesheet\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"div\",null,{\"id\":\"root\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"2017-12-using-home-assistant-and-philips-hue-to-create-a-full-colour-sunrise-alarm-clock\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",null,[\"$\",\"$L5\",null,{\"children\":\"$L6\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"RoWI3BtkfOC_vwQxepNfJ\",{\"children\":[[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[\"$\",\"$L9\",null,{\"children\":\"$La\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$b\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:I[86880,[\"844\",\"static/chunks/ee560e2c-c5c28398d0153d35.js\",\"322\",\"static/chunks/322-53eb1d32bf710b44.js\",\"173\",\"static/chunks/173-52b2b489d82616e2.js\",\"590\",\"static/chunks/590-97f4dc9b90039a27.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-9af1e0a685a480c8.js\"],\"default\"]\nd:T41e6,"])</script><script>self.__next_f.push([1,"\nThis is a new automation in my set-up, but it’s one I’m pretty happy with, not only because I think it’s a pretty cool effect, but for me, it’s actually a real money-saver.\n\nHere’s how I used [Philips Hue](http://amzn.to/2jkHCCj) and [Home Assistant](https://home-assistant.io/) to build a natural coloured sunrise in my bedroom and save over $400/year--\n\n![](https://www.youtube.com/watch?v=mccJNHih7a8)\n\n**How does this save me money?**\n\nI am addicted to snoozing on alarms in the morning.\n\nIn the mornings, I can either have a nice relaxing 30-minute walk into the office, or I can rush to the bus stop about 7\nminutes away and catch an 10 minute bus. This choice getting left to be made by the sleepiest version of myself is no\ngood-- sleepy Craig sucks. He’s a lazy piece of shit. He’d sell his first-born child for an extra 13 minutes of sleep in\nto morning.\n\nOver time, taking the bus adds up. By a conservative estimate of the e-cash fare ($2.35, for now...), and saving 4 trips/week for 48 weeks, that’s $451.20 back in my pocket! Fuck yeah!\n\nThis automation has significantly cut down on how many times I hit snooze, and I also find that waking up is less jarring and I’m a lot less groggy as a result.\n\nIf you are a Home Assistant user, and you have Philips Hue bulbs or some other coloured smart lighting system setup that\nsupports transitions, I definitely recommend setting something like this up!\n\n**How does it work?**\n\nI’m going to assume that you’ve already got Home Assistant set up and working with your lights. If not, head over to homeassistant.io and give it a try. It’s really pretty easy to get up and running and the learning curve is not as steep as it looks, plus, there is a fantastic community that will provide you with support if you hit a snag.\n\nNow, to implement this, we are going to be creating a Home Assistant script, which will be what run to create our sunrise effect, we’ll create a couple of entities to use in the front end so that we can easily configure when we want this to run, and then we’ll create the automation that will ultimate trigger the script at the desired time.\n\n**The script**\n\nIf you’ve played around with Home Assistant a bit, you might have already got a few scripts set-up, or you might just have everything configured right in the actions of your automations. There are a couple of advantages to doing this sort of thing in a script-- the first is that scripts allow us to reuse the actions easily and then if we want to change the action, we only need to adjust it in one place. This is especially nice when we are building more involved multi-step actions like our sunrise.\n\nHere’s what our sunrise script looks like-- It’s a long one, but I’ve got some comments there to give you an idea of what each block is doing and separated it into blocks for readability:\n\n```yaml\n    sunrise:\n      sequence:\n        # light 1 dark red to medium warm orange\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.craigs_bedroom_lamp\n            rgb_color: [98,19,0]\n            brightness: 1\n        - delay:\n            seconds: 1.00\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.craigs_bedroom_lamp\n            rgb_color: [249,123,0]\n            brightness: 103\n            transition: 15\n        - delay:\n            seconds: 15.00\n    \n        # light 2 dark warm orange to medium warm orange\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.jessicas_bedroom_lamp\n            rgb_color: [249,123,0]\n            brightness: 1\n        - delay:\n            seconds: 1.00\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.jessicas_bedroom_lamp\n            rgb_color: [249,123,0]\n            brightness: 103\n            transition: 15\n        - delay:\n            seconds: 15.00\n    \n        # group medium warm orange to full bright\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.sunrise\n            rgb_color: [255,178,67]\n            brightness: 255\n            transition: 30\n        - delay:\n            seconds: 30.00\n    \n    \n        # turn one bulb overhead on lowest and fade to full brightness slowly\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.bedroom_fan_1\n            brightness: 1\n        - delay:\n            seconds: 1.00\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.bedroom_fan_1\n            brightness: 255\n            transition: 60\n        - delay:\n            seconds: 60.00\n    \n        # turn on the second bulb overhead and fade to full brightness a bit faster\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.bedroom_fan_2\n            brightness: 1\n        - delay:\n            seconds: 1.00\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.bedroom_fan_2\n            brightness: 255\n            transition: 30\n    \n        # no delay - also through put the corridor outside the room on\n        - service: homeassistant.turn_on\n          data:\n            entity_id: light.upstairs_corridor\n            brightness: 200\n            transition: 5\n```\n\nThere are a couple of things worth noting about this script. What makes this effect work well is the use of the light entities ‘transition’ attribute in combination with the ‘delay’ action in the script.\n\nTypically, Home Assistant wants to perform actions quickly and then immediately move on to the next action. Normally, that’s exactly what we want, but in this case, it’s not. By setting the ‘transition’ in the data when we call the ‘homeassistant.turn_on’ service, we are telling Home Assistant how long it should take to transition from the lights current state to the new state. Now, we need Home Assistant to wait before performing the next step so we use the ‘delay’ action and set it to the same number as the number we have as our transition time.\n\nI’ve played with the times and I found that for me, these are the durations that work best, but you can play with them to suit your preference.\n\n**The entities**\n\nNow, before we write our automation to trigger this, lets create some entities that we can use to configure this a bit easier.\n\nI’ve got this set as two separate automations in my set-up. One for weekdays, and the other for weekends. This lets me have separate wake-up times that I don’t need to mess with too often.\n\nHere’s the entities I’ve created:\n\n```yaml\n    input_boolean:\n      weekday_sunrise:\n      weekend_sunrise:\n    \n    input_number:\n      weekday_alarm_hour:\n        name: Hour\n        icon: mdi:timer\n        min: 0\n        max: 23\n        step: 1\n      weekday_alarm_minutes:\n        name: Minutes\n        icon: mdi:timer\n        min: 0\n        max: 59\n        step: 5\n      weekend_alarm_hour:\n        name: Hour\n        icon: mdi:timer\n        min: 0\n        max: 23\n        step: 1\n      weekend_alarm_minutes:\n        name: Minutes\n        icon: mdi:timer\n        min: 0\n        max: 59\n        step: 5\n    \n    sensor:\n      - platform: template\n        sensors:\n          weekday_alarm_time:\n            friendly_name: 'Time'\n            value_template: '{{ \"%02d:%02d\" | format(states(\"input_number.weekday_alarm_hour\") | int, states(\"input_number.weekday_alarm_minutes\") | int) }}'\n          weekend_alarm_time:\n            friendly_name: 'Time'\n            value_template: '{{ \"%02d:%02d\" | format(states(\"input_number.weekend_alarm_hour\") | int, states(\"input_number.weekend_alarm_minutes\") | int) }}'\n```\n\n**Okay, whoa, whoa, whoa! What the fuck are those sensors? They look complicated.**\n\nYeah, you can add those and not touch them, but if you want to know what they are doing, I’ll try to explain. If you don’t give a shit or already know, [skip ahead](#sunrise-entities)\n\nAs you may or may not know, [Home Assistant has support for a template engine](https://home-assistant.io/docs/configuration/templating/) called [Jinja](http://jinja.pocoo.org/). This allows you to evaluate and manipulate data at execution. These sensors that we are creating here basically takes the data and instructions that we are giving it and evaluate it as the sensors state. This is a really powerful tool to have in your Home Assistant arsenal, and I’d highly recommend looking at the Home Assistant documentation and the Jinja documentation to get a better grasp on this.\n\nI’ll try to break down this statement and what happens behind the scenes:\n\n```yaml\n{{ \"%02d:%02d\" | format(states(\"input_number.weekday_alarm_hour\") | int, states(\"input_number.weekday_alarm_minutes\") | int) }}\n```\n\nWe’ll start looking at this from the inside-out\n\n```yaml\n{{ \"%02d:%02d\" | **format(states(\"input_number.weekday_alarm_hour\")** | int, states(\"input_number.weekday_alarm_minutes\") | int) }}\n```\nThis item in bold is just getting the state of the entity that it’s being passed. In this case, it’s going to be a string of characters representing a number-- If you remember when we created this entity, from 0-23 representing the hour we want to wake up at. Let’s pretend that we’ve got this set to 6. So this is going to end up returning “6”, and our statement now essentially looks like this:\n\n```yaml\n{{ \"%02d:%02d\" | format(**“6”** | int, states(\"input_number.weekday_alarm_minutes\") | int) }}\n```\n\nNow, we’ve got the same thing happening to the other number entity.\n\n```yaml\n{{ \"%02d:%02d\" | format(“6” | int, **states(\"input_number.weekday_alarm_minutes\")** | int) }}\n```\n\nThis represented minutes, so it’s going to be between 0-59. Let’s pretend we’ve got this set to 30. As you can probably guess, this is going to return “30”\n\n```yaml\n{{ \"%02d:%02d\" | format(“6” | int, **“30”**| int) }}\n```\n\nOk, now what is that line symbol ('|') we see in here? That’s a pipe symbol and in jinja, it’s the filter operator. Essentially, it takes what is on the left and filters it through what is on the right side.\n\n```yaml\n{{ \"%02d:%02d\" | format(**“6” | int**, **“30”| int**) }}\n```\n\nIn the case above, we are taking “6” and putting it though the int filter. This int filter basically says to take the characters on the left side and make them a number that the computer can use. So “6” | int becomes 6 and “30” | 30. Now our statement looks like this:\n\n```yaml\n{{ \"%02d:%02d\" | format(**6, 30**) }}\n```\n\nOk, that’s a bit easier to read now. Now we’ve just got some crazy characters, the filter with our numbers representing the time.\n\n```yaml\n{{ **\"%02d:%02d\" | format(6, 30)** }}\n```\n\nSo, the format filter means to apply Python string formatting. Python string formatting is a way for you to say “I want a string of characters that looks like this” and then give it some data and get a string that looks the way you asked it to.\n\nThe crazy string of characters represents how we want the resulting string to look and the numbers in the brackets are extra data (called parameters) that we want to be formatted in this way.\n\n[PyFormat.info](https://pyformat.info/) has some good information on all the ways you can format a string, but what you need to know about this is that the ‘%’ sign means that we are going to put the a value that is getting passed in here, the ‘d’ is the type of data that is going here (d means int). The stuff in between says how we want to display it-- the 2 means it should be 2 characters long and 0 is the character we should use to pad it if the value is too short. So for our first value 6 inserted at the first %02d becomes 06 and the second value at the second %02d becomes 30. The ‘:’ character unchanged since it is outside of the replacement which leaves us with\n\n```yaml\n{{ \"06:30” }}\n```\n\nThe double curly brackets in jinja just means to evaluate what is inside and output it. We already know what that is-- 06:30! That’s our sensors state!\n\n**The other entities**\n\nOk, remember those other entities we set up? The non-crazy ones?\n\n```yaml\n    input_boolean:\n      weekday_sunrise:\n      weekend_sunrise:\n    \n    input_number:\n      weekday_alarm_hour:\n        name: Hour\n        icon: mdi:timer\n        min: 0\n        max: 23\n        step: 1\n      weekday_alarm_minutes:\n        name: Minutes\n        icon: mdi:timer\n        min: 0\n        max: 59\n        step: 5\n      weekend_alarm_hour:\n        name: Hour\n        icon: mdi:timer\n        min: 0\n        max: 23\n        step: 1\n      weekend_alarm_minutes:\n        name: Minutes\n        icon: mdi:timer\n        min: 0\n        max: 59\n        step: 5\n```\n\nYeah, those ones.\n\nI just added those their own groups like this and then added them to one of my views:\n\n```yaml\n    weekday_sunrise_panel:\n        name: Weekday Alarm Clock\n        entities:\n          - input_boolean.weekday_sunrise\n          - sensor.weekday_alarm_time\n          - input_number.weekday_alarm_hour\n          - input_number.weekday_alarm_minutes\n    \n    weekend_sunrise_panel:\n        name: Weekend Alarm Clock\n        entities:\n          - input_boolean.weekend_sunrise\n          - sensor.weekend_alarm_time\n          - input_number.weekend_alarm_hour\n          - input_number.weekend_alarm_minutes\n```\n\n**The automation**\n\nOk, so now that we’ve got our script ready to go and our entities set up in the front end, let’s make our automations!\n\n```yaml\n    - alias: 'Weekday Sunrise'\n      initial_state: 'on'\n      trigger:\n        - platform: time\n          minutes: '/1'\n          seconds: 0\n      condition:\n        - condition: time\n          weekday:\n            - mon\n            - tue\n            - wed\n            - thu\n            - fri\n        - condition: state\n          entity_id: input_boolean.weekday_sunrise\n          state: 'on'\n        - condition: template\n          value_template: '{{ ((as_timestamp(now())|int)|timestamp_custom(\"%H:%M\"))  == states(\"sensor.weekday_alarm_time\") }}'\n      action:\n        - service: media_player.play_media\n          data:\n            entity_id: media_player.everywhere\n            media_content_id: https://149walnut.publicvm.com:8123/local/audio/circle-of-life.mp3\n            media_content_type: audio/mp3\n        - delay: 3 #this is here to compensate for the delay in playing the media over chromecast.\n        - service: script.turn_on\n          entity_id: script.sunrise\n    \n    - alias: 'Weekend Sunrise'\n      initial_state: 'on'\n      trigger:\n        - platform: time\n          minutes: '/1'\n          seconds: 0\n      condition:\n        - condition: time\n          weekday:\n            - sat\n            - sun\n        - condition: state\n          entity_id: input_boolean.weekend_sunrise\n          state: 'on'\n        - condition: template\n          value_template: '{{ ((as_timestamp(now())|int)|timestamp_custom(\"%H:%M\"))  == states(\"sensor.weekend_alarm_time\") }}'\n      action:\n        - service: script.turn_on\n          entity_id: script.sunrise\n```\n\nHere’s our two automations. Both are pretty much exactly the same, with a couple of exceptions.\n\nThe triggers are exactly the same in both. The trigger happens every minute. Obviously we don’t want this firing every minute, that’s where our conditions come into play.\n\nThe first condition is for the day of the week-- pretty straight forward. The weekday automation is set to weekdays and the weekend automation is set to weekends.\n\nThe second condition is whether or not we have our input_boolean switch enabled. We’ve got a separate switch so we can turn weekday or weekend alarms on or off independently. Each automation uses the corresponding input_boolean for this condition.\n\nThe third condition is another template! We already know how templates get evaluated. This is pretty similar. What we haven’t seen before is the == sign. This means to check for equivalence between the values on either side.\n\nWithout going into too much detail about templates again, the stuff on the right side uses some built-in functions to get the current time and output it. These built-in functions output the time as a string in the same format as the format we used for the sensor we created earlier. On the right side-- hey, look at that! We’re getting the state of our sensor! So, when the clock hits the time that we set, this will be True and our third condition will be met!\n\nThe action on both of these are similar-- they both trigger our script. The only real difference between these two actions is that on weekdays, I like to wake up to the sunrise accompanied by “The Circle of Life” from the Lion King soundtrack blaring on all my speakers… I don’t need to justify myself to you.\n\nThat’s it! If you have any questions or if you’ve implemented this yourself, let me know in the comments!\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$Lc\",null,{\"post\":{\"slug\":\"2017-12-using-home-assistant-and-philips-hue-to-create-a-full-colour-sunrise-alarm-clock\",\"title\":\"Using Home Assistant and Philips Hue to create a full colour sunrise\",\"date_published\":\"$D2017-12-06T21:58:00.000Z\",\"date_updated\":\"$D2018-12-21T20:51:44.000Z\",\"tags\":\"Home Assistant, YAML, Philips Hue, Home Automation\",\"cover_image\":\"/assets/blog/sunrise.jpg\",\"content\":\"$d\"}}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Craig Midwinter - Personal Website\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Welcome to my personal website. Check out my resume, GitHub, LinkedIn, podcast, and blog posts.\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/craigjmidwinter.github.io/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script></body></html>