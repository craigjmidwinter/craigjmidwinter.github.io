<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/assets/blog/computer-electronics-laptop-755416.jpg"/><link rel="stylesheet" href="/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/craigjmidwinter.github.io/_next/static/chunks/webpack-05a4c90833827c02.js"/><script src="/craigjmidwinter.github.io/_next/static/chunks/4bd1b696-d31891ed15a5103e.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/517-2e9372f9ab95c04e.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/main-app-3b8a8eba0304deb0.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/285-46291424471f6717.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/app/layout-7d366822714c55bb.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/ee560e2c-c5c28398d0153d35.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/977-4f350745d400d589.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/173-52b2b489d82616e2.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/590-97f4dc9b90039a27.js" async=""></script><script src="/craigjmidwinter.github.io/_next/static/chunks/app/blog/%5Bslug%5D/page-ac15a53f2a627631.js" async=""></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><title>Craig Midwinter - Personal Website</title><meta name="description" content="Welcome to my personal website. Check out my resume, GitHub, LinkedIn, podcast, and blog posts."/><link rel="icon" href="/craigjmidwinter.github.io/favicon.ico" type="image/x-icon" sizes="16x16"/><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"/><script src="/craigjmidwinter.github.io/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-styled="" data-styled-version="6.1.15">.cMMXFN{background:rgba(0, 0, 20, 0.9);padding:1.5rem 2rem;border-bottom:2px solid #0ff;box-shadow:0 0 25px rgba(0, 255, 255, 0.3);position:relative;font-family:'Press Start 2P',monospace;backdrop-filter:blur(5px);}/*!sc*/
data-styled.g1[id="sc-FEMpB"]{content:"cMMXFN,"}/*!sc*/
.kIaxle{list-style:none;display:flex;gap:2rem;margin:0;padding:0;justify-content:center;}/*!sc*/
data-styled.g2[id="sc-gjcoXW"]{content:"kIaxle,"}/*!sc*/
.iGNEod{position:relative;}/*!sc*/
.iGNEod a{color:#0ff;text-decoration:none;padding:0.5rem 1rem;transition:all 0.3s ease;position:relative;}/*!sc*/
.iGNEod a:hover{color:#f0f;animation:cjwSKm 0.3s infinite;}/*!sc*/
.iGNEod a:hover::before{content:">";position:absolute;left:-1.2em;filter:drop-shadow(0 0 2px #f0f);}/*!sc*/
.iGNEod a:hover::after{content:"_";margin-left:0.5rem;}/*!sc*/
data-styled.g3[id="sc-dVBluf"]{content:"iGNEod,"}/*!sc*/
@keyframes cjwSKm{0%{text-shadow:2px 2px #0ff,-2px -2px #f0f;}25%{text-shadow:-2px 2px #0ff,2px -2px #f0f;}50%{text-shadow:2px -2px #0ff,-2px 2px #f0f;}75%{text-shadow:-2px -2px #0ff,2px 2px #f0f;}100%{text-shadow:2px 2px #0ff,-2px -2px #f0f;}}/*!sc*/
data-styled.g11[id="sc-keyframes-cjwSKm"]{content:"cjwSKm,"}/*!sc*/
.jJIuNk{position:fixed;top:0;left:0;width:100vw;height:100vh;object-fit:cover;z-index:-2;}/*!sc*/
data-styled.g12[id="sc-cMqPwU"]{content:"jJIuNk,"}/*!sc*/
.hNzkKj{max-width:800px;margin:2rem auto;padding:2rem;background:#000;color:#0f0;font-family:'IBM Plex Mono',monospace;line-height:1.6;border:2px solid #0f0;box-shadow:0 0 20px rgba(0, 255, 0, 0.5);position:relative;overflow:hidden;}/*!sc*/
data-styled.g13[id="sc-jUkaYT"]{content:"hNzkKj,"}/*!sc*/
.dYLfrY{background:rgba(0, 0, 0, 0.7);color:#ff0;border:1px solid #f0f;padding:1rem;margin-bottom:1rem;text-align:center;font-size:0.85rem;line-height:1.4;}/*!sc*/
.dYLfrY strong{color:#f0f;}/*!sc*/
data-styled.g14[id="sc-deSjom"]{content:"dYLfrY,"}/*!sc*/
.goaCnt{margin-bottom:1rem;}/*!sc*/
.goaCnt h1{font-size:1.5rem;margin-bottom:1rem;color:#0f0;}/*!sc*/
.goaCnt p{color:#0f0;opacity:0.9;margin:0;}/*!sc*/
data-styled.g15[id="sc-jHswkR"]{content:"goaCnt,"}/*!sc*/
.gjOEAT{max-width:100%;height:auto;border:1px solid #0f0;box-shadow:0 0 15px rgba(0, 255, 0, 0.5);margin-bottom:1rem;}/*!sc*/
data-styled.g16[id="sc-cSaEAk"]{content:"gjOEAT,"}/*!sc*/
.jiDSyH{display:flex;justify-content:center;margin:1rem 0;}/*!sc*/
.jiDSyH iframe{width:560px;height:315px;border:0;}/*!sc*/
data-styled.g20[id="sc-eiwqOE"]{content:"jiDSyH,"}/*!sc*/
</style></head><body><div id="root"><video autoPlay="" loop="" muted="" class="sc-cMqPwU jJIuNk"><source src="/outrun-waves_1.webm" type="video/webm"/></video><nav class="sc-FEMpB cMMXFN"><ul class="sc-gjcoXW kIaxle"><li class="sc-dVBluf iGNEod"><a href="/craigjmidwinter.github.io/blog/">BLOG HOME</a></li><li class="sc-dVBluf iGNEod"><a href="/craigjmidwinter.github.io">ABOUT CRAIG</a></li></ul></nav><div class="sc-jUkaYT hNzkKj"><div class="sc-jHswkR goaCnt"><p>2018-07-04</p><h1>I hired a dude who voices Nike commercials to tell me when my cat litter is full</h1><img src="/assets/blog/computer-electronics-laptop-755416.jpg" alt="I hired a dude who voices Nike commercials to tell me when my cat litter is full" class="sc-cSaEAk gjOEAT"/></div><div class="sc-deSjom dYLfrY"><p><strong>Note:</strong> This blog is an archive. Some content may be out of date, and images may be broken or missing. If you find an issue or have a question, please email <strong>craig.j.midwinter@gmail.com</strong>.</p></div><p>So, recently I decided to step my game up with my audio notifications for my home automation setup. I’m in the process of slowly redoing some of my YAML automations in Node-RED, and I thought what better of a time to make some improvements.</p>
<p>Up until recently I had been just using the built-in Home Assistant tts.google_say service to create whatever message I needed and then piping that over my whole home audio when I needed. It’s reliable and gets the job done just fine, but it’s very robotic and I wanted a voice with personality and confidence.</p>
<p>So, naturally, I went on Fiverr.</p>
<p>After some searching and listening to a lot of different samples I came across a gig from a guy named Uni V Sol who had a very impressive demo reel.</p>
<div class="sc-eiwqOE jiDSyH"><iframe src="https://www.youtube.com/embed/8Iz0qAC7ymo" allowFullScreen="" title=""></iframe></div>
<p>Perfect. If major brands like Nike, Pepsi and AT&amp;T trusted him to deliver their important messages, I’m sure I could trust him to deliver important notifications about my cat’s litter box being full.</p>
<p>So, I bought 50 words worth and sent him a list of notifications.</p>
<p>How did they turn out? Have a listen to my new cat litter notification:</p>
<p>It was super affordable and I’m really happy with how they turned out. I’ll definitely be ordering from him again once I’ve got another batch of notifications ready. <a href="https://www.fiverr.com/univsolmc/record-an-urban-male-voice-over">(Check out his fiverr gig here)</a></p>
<p>Now that I’ve got my fancy new notifications, let’s put them to use</p>
<p>I don’t really care about if these go off when I’m not home, but I don’t want them to go off while the house is in ‘Night Mode’ and wake us up. Since I’ve got more than a few notifications that need to be handled in the same way I decided to create a reusable sub-flow that I could just pass messages into from other flows.</p>
<p>The first node there is the entry point– every flow that is going to pass this flow a message is going to have a corresponding node that is the other side of the virtual wire. This is where the messages come in.</p>
<p>The way that I’ve configure this to work is that incoming messages should all have a property on the message named file that is set to the url of the file we want to play, so we’ll always send a message where msg.file = “<a href="https://server/our-notification.mp3">https://server/our-notification.mp3</a>.</p>
<p>It’s important to note that I set this on the message object directly and not as part of the payload. The reason that I do that is because the Home Assistant Node-RED nodes trample over the data in the payload, so setting it directly on the msg object makes it easier to persist from node to node.</p>
<p>From there I check the state of an input_boolean that I have set up in HASS that indicates whether or not the house is in “Night Mode”. In my setup, this entity is basically Do Not Disturb mode. This node has a “half if state” set to on, and so if any messages come in while we’re in night mode, we just ignore them.</p>
<p>After that it’s fairly self-explanatory– First it sets the volume of my everywhere media_player group, and then there are two different pairs of nodes that prep a the payload with a sound file, in the set it preps and plays a small blank sound file and then in the second set it preps and plays the notification file I need.</p>
<p>The reason for the blank spacer is because for reasons that still remain a mystery to me, often when Home Assistant tries to play an audio file and it hasn’t yet taken control of the chromecast group, I can hear the chime indicating that HASS has connected, but the audio fails to play. If it’s followed by audio in the next few minutes while HASS still has control, it plays without a hitch, so I’ve got this little blank file in there to make it work more smoothly. If you know why it does this or have a fix for it, please let me know in the comments!</p>
<p>And that about does it for this
flow! <a href="/blog/2018-06-automatic-litterbox-notifications-using-an-home-assistant-and-node-red-with-an-external-rest-api/">If you want to check out how I’ve set up my cat litter notification, check out this post</a>!</p></div></div><script src="/craigjmidwinter.github.io/_next/static/chunks/webpack-05a4c90833827c02.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[93812,[\"285\",\"static/chunks/285-46291424471f6717.js\",\"177\",\"static/chunks/app/layout-7d366822714c55bb.js\"],\"default\"]\n3:I[15244,[],\"\"]\n4:I[43866,[],\"\"]\n6:I[86213,[],\"OutletBoundary\"]\n8:I[86213,[],\"MetadataBoundary\"]\na:I[86213,[],\"ViewportBoundary\"]\nc:I[34835,[],\"\"]\n:HL[\"/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"-bacap1V3AiGvFOWYwHcm\",\"p\":\"/craigjmidwinter.github.io\",\"c\":[\"\",\"blog\",\"2018-06-i-hired-a-dude-who-voices-nike-commercials-to-tell-me-when-my-cat-litter-is-full\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2018-06-i-hired-a-dude-who-voices-nike-commercials-to-tell-me-when-my-cat-litter-is-full\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/craigjmidwinter.github.io/_next/static/css/a2fe316cdd23b4ed.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Press+Start+2P\u0026display=swap\",\"rel\":\"stylesheet\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"div\",null,{\"id\":\"root\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"2018-06-i-hired-a-dude-who-voices-nike-commercials-to-tell-me-when-my-cat-litter-is-full\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":\"$L7\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"Tv-yyqQAbRy9R-KxPxOia\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[86880,[\"844\",\"static/chunks/ee560e2c-c5c28398d0153d35.js\",\"285\",\"static/chunks/285-46291424471f6717.js\",\"977\",\"static/chunks/977-4f350745d400d589.js\",\"173\",\"static/chunks/173-52b2b489d82616e2.js\",\"590\",\"static/chunks/590-97f4dc9b90039a27.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-ac15a53f2a627631.js\"],\"default\"]\ne:Tfe5,"])</script><script>self.__next_f.push([1,"\nSo, recently I decided to step my game up with my audio notifications for my home automation setup. I’m in the process of slowly redoing some of my YAML automations in Node-RED, and I thought what better of a time to make some improvements.\n\nUp until recently I had been just using the built-in Home Assistant tts.google_say service to create whatever message I needed and then piping that over my whole home audio when I needed. It’s reliable and gets the job done just fine, but it’s very robotic and I wanted a voice with personality and confidence.\n\nSo, naturally, I went on Fiverr.\n\nAfter some searching and listening to a lot of different samples I came across a gig from a guy named Uni V Sol who had a very impressive demo reel.\n\n![](https://www.youtube.com/watch?v=8Iz0qAC7ymo)\n\nPerfect. If major brands like Nike, Pepsi and AT\u0026T trusted him to deliver their important messages, I’m sure I could trust him to deliver important notifications about my cat’s litter box being full.\n\nSo, I bought 50 words worth and sent him a list of notifications.\n\nHow did they turn out? Have a listen to my new cat litter notification:\n\nIt was super affordable and I’m really happy with how they turned out. I’ll definitely be ordering from him again once I’ve got another batch of notifications ready. [(Check out his fiverr gig here)](https://www.fiverr.com/univsolmc/record-an-urban-male-voice-over)\n\nNow that I’ve got my fancy new notifications, let’s put them to use\n\nI don’t really care about if these go off when I’m not home, but I don’t want them to go off while the house is in ‘Night Mode’ and wake us up. Since I’ve got more than a few notifications that need to be handled in the same way I decided to create a reusable sub-flow that I could just pass messages into from other flows.\n\nThe first node there is the entry point– every flow that is going to pass this flow a message is going to have a corresponding node that is the other side of the virtual wire. This is where the messages come in.\n\nThe way that I’ve configure this to work is that incoming messages should all have a property on the message named file that is set to the url of the file we want to play, so we’ll always send a message where msg.file = “https://server/our-notification.mp3.\n\nIt’s important to note that I set this on the message object directly and not as part of the payload. The reason that I do that is because the Home Assistant Node-RED nodes trample over the data in the payload, so setting it directly on the msg object makes it easier to persist from node to node.\n\nFrom there I check the state of an input_boolean that I have set up in HASS that indicates whether or not the house is in “Night Mode”. In my setup, this entity is basically Do Not Disturb mode. This node has a “half if state” set to on, and so if any messages come in while we’re in night mode, we just ignore them.\n\nAfter that it’s fairly self-explanatory– First it sets the volume of my everywhere media_player group, and then there are two different pairs of nodes that prep a the payload with a sound file, in the set it preps and plays a small blank sound file and then in the second set it preps and plays the notification file I need.\n\nThe reason for the blank spacer is because for reasons that still remain a mystery to me, often when Home Assistant tries to play an audio file and it hasn’t yet taken control of the chromecast group, I can hear the chime indicating that HASS has connected, but the audio fails to play. If it’s followed by audio in the next few minutes while HASS still has control, it plays without a hitch, so I’ve got this little blank file in there to make it work more smoothly. If you know why it does this or have a fix for it, please let me know in the comments!\n\nAnd that about does it for this\nflow! [If you want to check out how I’ve set up my cat litter notification, check out this post](/blog/2018-06-automatic-litterbox-notifications-using-an-home-assistant-and-node-red-with-an-external-rest-api/)!\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Ld\",null,{\"post\":{\"slug\":\"2018-06-i-hired-a-dude-who-voices-nike-commercials-to-tell-me-when-my-cat-litter-is-full\",\"title\":\"I hired a dude who voices Nike commercials to tell me when my cat litter is full\",\"date_published\":\"$D2018-07-04T00:00:00.000Z\",\"date_updated\":\"$D2018-12-21T20:48:22.000Z\",\"tags\":\"Home Assistant, Home Automation, Node-RED\",\"cover_image\":\"/assets/blog/computer-electronics-laptop-755416.jpg\",\"content\":\"$e\"}}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Craig Midwinter - Personal Website\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Welcome to my personal website. Check out my resume, GitHub, LinkedIn, podcast, and blog posts.\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/craigjmidwinter.github.io/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script></body></html>